\usepackage{hyperref}
\usepackage{ifthen}
\usepackage{rotating}
\usepackage{color}
\usepackage{booktabs}
\usepackage{siunitx}

%% Line spacing
\usepackage{setspace}
\renewcommand{\baselinestretch}{1.5}

%% Equation
\usepackage{amsmath}
\usepackage{unicode-math}
\setmathfont{XITS Math}
\usepackage{xltxtra}
\usepackage{letltxmacro}
\LetLtxMacro{\originaleqref}{\eqref}
\renewcommand{\eqref}{Eq.~\originaleqref}

%% Numbering [amsmath]
\numberwithin{equation}{chapter}
\numberwithin{figure}{chapter}
\numberwithin{table}{chapter}

%% bibliography
\usepackage[english]{babel}
\usepackage[backend=biber, style=authoryear, maxcitenames=2, maxbibnames=9, giveninits=true]{biblatex}
\addbibresource{reference.bib}

%% citation Style
\usepackage{xpatch}
\xpatchbibdriver{article}{%
	\usebibmacro{in:}}{}{}{}
\xpatchbibmacro{journal+issuetitle}{%
	\setunit*{\addspace}}{%
	\setunit*{\addsemicolon\addspace}}{}{}
\DeclareFieldFormat[article,periodical]{number}{\mkbibparens{#1}}% number of a journal
\DeclareFieldFormat[article,periodical]{pages}{pp. #1}
\renewbibmacro*{volume+number+eid}{%
	\printfield{volume}%
	\setunit*{\space}%
	\printfield{number}%
	\setunit{\addcomma\space}%
	\printfield{eid}}
\renewbibmacro*{note+pages}{%
	\printfield{note}%
	\setunit{\addcolon\addspace}%
	\printfield{pages}%
	\newunit}

%% Korean font
\usepackage{fontspec}
\setmainfont{Times New Roman}
\usepackage{xeCJK}
\xeCJKDeclareSubCJKBlock{Hangul} { "1100 -> "11FF, "3130 -> "318F, "A960 -> "A97F, "AC00 -> "D7AF }
\setCJKmainfont[Hangul]{batang.ttf}
\setCJKsansfont[Hangul]{batang.ttf}
\setCJKmonofont[Hangul]{gulim.ttf}
\XeTeXlinebreaklocale "ko"

%% Layout
\usepackage{multirow}
\usepackage{titlesec}
\usepackage[top=30truemm,bottom=30truemm,left=25truemm,right=25truemm]{geometry}
\usepackage{layout}
\usepackage{graphicx}

%% Table of contents
\setcounter{tocdepth}{2}
\usepackage[nottoc]{tocbibind}
\newcommand{\cftsectiondotsep}{\cftdotsep}
\usepackage{tocloft}
\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}} % leaders for sections
\renewcommand{\cftchapleader}{\cftdotfill{\cftsecdotsep}}  % leaders for chapters

\renewcommand{\cfttoctitlefont}{\hfill\fontsize{16pt}{0cm}\bfseries}
\renewcommand{\cftaftertoctitle}{\hfill\null}
\setlength{\cftbeforechapskip}{-0.1em}
\setlength{\cftbeforetoctitleskip}{0pt}
\setlength{\cftaftertoctitleskip}{1cm}

\renewcommand{\cftlottitlefont}{\hfill\fontsize{16pt}{0cm}\selectfont\bfseries}
\renewcommand{\cftafterlottitle}{\hfill\null}
\setlength{\cftbeforelottitleskip}{0pt}
\setlength{\cftafterlottitleskip}{1cm}
\renewcommand{\cfttabpresnum}{Table. }
\renewcommand{\cfttabaftersnum}{.}
\renewcommand{\cfttabnumwidth}{5em}

\renewcommand{\cftloftitlefont}{\hfill\fontsize{16pt}{0cm}\selectfont\bfseries}
\renewcommand{\cftafterloftitle}{\hfill\null}
\setlength{\cftbeforeloftitleskip}{0pt}
\setlength{\cftafterloftitleskip}{1cm}
\renewcommand{\cftfigpresnum}{Fig. }
\renewcommand{\cftfigaftersnum}{.}
\renewcommand{\cftfignumwidth}{5em}

%% Heading style
\makeatletter
\def\@makechapterhead#1{%
	{\parindent \z@ \raggedright \normalfont
			\ifnum \c@secnumdepth >\m@ne
				\if@mainmatter
					\centering\fontsize{16pt}{0cm}\selectfont\bfseries\space\thechapter.\space
				\fi
			\fi
			\interlinepenalty\@M
			\fontsize{16pt}{0cm}\selectfont\bfseries #1\par\nobreak
			\vskip 40\p@
		}}
\def\@makeschapterhead#1{%
	{\parindent \z@ \raggedright \normalfont
			\ifnum \c@secnumdepth >\m@ne
				\if@mainmatter
					\centering\fontsize{16pt}{0cm}\selectfont\bfseries\space
				\fi
			\fi
			\interlinepenalty\@M
			\fontsize{16pt}{0cm}\selectfont\bfseries #1\par\nobreak
			\vskip 40\p@
		}}
\makeatother
\titleformat*{\section}{\fontsize{14pt}{0cm}\selectfont\bfseries}
\titleformat*{\subsection}{\fontsize{12pt}{0cm}\selectfont\bfseries}
\titleformat*{\subsubsection}{\fontsize{11pt}{0cm}\selectfont\bfseries}
\titlespacing*{\section}{0pt}{1cm}{0.5cm}
\titlespacing*{\subsection}{0pt}{1cm}{0.5cm}
\titlespacing*{\subsubsection}{0pt}{1cm}{0cm}
\setcounter{secnumdepth}{4}
\titlelabel{\thetitle.\quad}

%% figure and table style
\usepackage{caption}
\captionsetup[figure]{labelfont={},labelformat={default},labelsep=period,name={Fig.}}
\captionsetup[table]{labelfont={},labelformat={default},labelsep=period,name={Table}}
\renewcommand{\theequation}{\arabic{chapter}.\arabic{equation}}
\renewcommand{\thefigure}{\arabic{chapter}.\arabic{figure}}
\renewcommand{\thetable}{\arabic{chapter}.\arabic{table}}
\renewcommand{\figurename}{Fig.}

%% Header & Footer Style
\usepackage{fancyhdr}
\pagestyle{fancyplain}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt} % remove lines as well
\renewcommand{\footrulewidth}{0pt}
\cfoot{-- \thepage\ --}

%% my macros
\newcommand{\see}[1]{(\cite{#1})}
\newcommand{\mathvec}[1]{\boldsymbol{#1}}
\newcommand{\mathmat}[1]{\mathrm{\mathbf{#1}}}
